# Enable true colors and set status line colours
set -g default-terminal "screen-256color"
set -g status-style 'bg=#abacac fg=#424451'

# Vi mode for scrollback
set-window-option -g mode-keys vi

bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'V' send -X select-line # select line with "V"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"

unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode after dragging with mouse

# No escape timeout
set -sg escape-time 0

# Enable mouse support
set -g mouse on

# Window index starts at 1
set -g base-index 1

# Limit the scrollback
set -g history-limit 10000
set -g @plugin 'tmux-plugins/tpm'
# tpm plugin
set -g @plugin 'tmux-plugins/tpm'

# list of tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator' # for navigating panes and vim/nvim with Ctrl-hjkl
set -g @plugin 'tmux-plugins/tmux-resurrect' # persist tmux sessions after computer restart
set -g @plugin 'tmux-plugins/tmux-continuum' # automatically saves sessions for you every 15 minutes

set -g @resurrect-capture-pane-contents 'on' # allow tmux-ressurect to capture pane contents
set -g @continuum-restore 'on' # enable tmux-continuum functionality

# Prefix => Ctrl-b
set -g prefix C-b

# Clear the screen
bind C-l send-keys 'C-l'

# Rebind split pane commands
unbind %
bind | split-window -h

unbind '"'
bind - split-window -v

# Reload the config file
unbind r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# Easy pane resizing
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5

# Maximise the current pane
bind -r m resize-pane -Z

# Sessionizer
bind-key -r f run-shell "tmux neww ~/.config/scripts/tmux-sessionizer.sh"

# Active session switcher
bind-key -r l run-shell "tmux neww ~/.config/scripts/tmux-session-switcher.sh"

# Default Mappings
# ------------------------------
# C-o   |   rotate-window
# ------|-----------------------
# C-z   |   suspend-client
# ------|-----------------------
# Space |   next-layout
# ------|-----------------------
# !     |   break-pane
# ------|-----------------------
# #     |   list-buffers
# ------|-----------------------
# $     |   command-prompt -I #S "rename-session '%%'"
# ------|-----------------------
# &     |   confirm-before -p "kill-window #W? (y/n)" kill-window
# ------|-----------------------
# '     |   command-prompt -p index "select-window -t ':%%'"
# ------|-----------------------
# (     |   switch-client -p
# ------|-----------------------
# )     |   switch-client -n
# ------|-----------------------
# ,     |   command-prompt -I #W "rename-window '%%'"
# ------|-----------------------
# -     |   delete-buffer
# ------|-----------------------
# .     |   command-prompt "move-window -t '%%'"
# ------|-----------------------
# 0     |   select-window -t :0
# ------|-----------------------
# 1     |   select-window -t :1
# ------|-----------------------
# 2     |   select-window -t :2
# ------|-----------------------
# 3     |   select-window -t :3
# ------|-----------------------
# 4     |   select-window -t :4
# ------|-----------------------
# 5     |   select-window -t :5
# ------|-----------------------
# 6     |   select-window -t :6
# ------|-----------------------
# 7     |   select-window -t :7
# ------|-----------------------
# 8     |   select-window -t :8
# ------|-----------------------
# 9     |   select-window -t :9
# ------|-----------------------
# :     |   command-prompt
# ------|-----------------------
# ;     |   last-pane
# ------|-----------------------
# =     |   choose-buffer
# ------|-----------------------
# ?     |   list-keys
# ------|-----------------------
# D     |   choose-client
# ------|-----------------------
# L     |   switch-client -l
# ------|-----------------------
# [     |   copy-mode
# ------|-----------------------
# ]     |   paste-buffer
# ------|-----------------------
# c     |   new-window
# ------|-----------------------
# d     |   detach-client
# ------|-----------------------
# f     |   command-prompt "find-window '%%'"
# ------|-----------------------
# i     |   display-message
# ------|-----------------------
# l     |   last-window
# ------|-----------------------
# n     |   next-window
# ------|-----------------------
# o     |   select-pane -t :.+
# ------|-----------------------
# p     |   previous-window
# ------|-----------------------
# q     |   display-panes
# ------|-----------------------
# r     |   refresh-client
# ------|-----------------------
# s     |   choose-tree
# ------|-----------------------
# t     |   clock-mode
# ------|-----------------------
# w     |   choose-window
# ------|-----------------------
# x     |   confirm-before -p "kill-pane #P? (y/n)" kill-pane
# ------|-----------------------
# {     |   swap-pane -U
# ------|-----------------------
# }     |   swap-pane -D
# ------|-----------------------
# ~     |   show-messages
# ------|-----------------------
# PPage |   copy-mode -u
# ------|-----------------------
# Up    |   select-pane -U
# ------|-----------------------
# Down  |   select-pane -D
# ------|-----------------------
# Left  |   select-pane -L
# ------|-----------------------
# Right |   select-pane -R
# ------|-----------------------
# M-1   |   select-layout even-horizontal
# ------|-----------------------
# M-2   |   select-layout even-vertical
# ------|-----------------------
# M-3   |   select-layout main-horizontal
# ------|-----------------------
# M-4   |   select-layout main-vertical
# ------|-----------------------
# M-5   |   select-layout tiled
# ------|-----------------------
# M-n   |   next-window -a
# ------|-----------------------
# M-o   |   rotate-window -D
# ------|-----------------------
# M-p   |   previous-window -a
# ------------------------------

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
